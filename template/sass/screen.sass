// BASELINE TEMPLATE
@import core/_reset
@import core/_css
@import core/_typography
@import core/_grid

@mixin mini_button
  color: #fff
  @include border_radius(3px)
  background: #181818
  box-shadow: inset rgba(255,255,255,0.2) 0 1px 1px, inset rgba(255,255,255,0.1) 0 2px 1em
  text-shadow: rgba(255,255,255,0.4) 0 1px 1px
  &:hover, &:focus
    background: #0066ff
    cursor: pointer

@mixin content_editable
  @include border_radius(6px)
  border: 1px dashed transparent
  &.empty, &:focus
    background: rgba(255,255,200,0.3)
    @include box_shadow(rgba(255,246,163,1), 0, 0, 15px)
    outline: none
  &.empty
    @include opacity(0.5)
    &:focus
      @include opacity(1)
  &:focus
    border-color: rgba(0,102,255,0.3)
  a
    cursor: pointer

@mixin content_overlay
  display: none
  position: absolute
  z-index: 2
  margin: 0
  background: rgba(255,246,163,1)
  @include border_radius(4px)
  box-shadow: 0 1px 5px rgba(0,0,0,.4), 0 1px 2px rgba(0,0,0,0.5)
  border: 2px solid #fff
  padding: 10px
  &:before
    content: ""
    position: absolute
    left: 0
    top: -8px
    width: 0
    height: 0
    border-left: 8px solid transparent
    border-right: 8px solid transparent
    border-bottom: 8px solid #fff

html, body
  margin: 0
  padding: 0
  height: 100%
  width: 100%
  overflow: auto

::-webkit-scrollbar
  width: 5px
  height: 5px
::-webkit-scrollbar-button
  display: none
::-webkit-scrollbar-track-piece
  //background: #555
  //-webkit-box-shadow: inset 0 1px 5px #000, inset 0 0 2px rgba(0,0,0,0.5)
  background: transparent
  margin: 5px
::-webkit-scrollbar-thumb
  position: relative
  height: 0px
  //background: #0088dd
  background: $color_link_bright
  box-shadow: 0 0 2px (255,255,255,0.5)
  @include border_radius(3px)
  &:window-inactive
    background: #ddd

body
  background: #f2f2f2 url("../images/paper_texture.gif") 0 0 repeat
  color: #222
  box-shadow: inset rgba(0,0,0,0.4) 0 30px 20px
  &.overlay:after
    content: ""
    background: rgba(0,0,0,0.6)
    position: absolute
    top: 0
    right: 0
    bottom: 0
    left: 0
    z-index: 4

a
  text-decoration: none
  &:link, &:visited
    color: #0f6def
  &:hover, &:focus
    color: #0066ff
    text:
      decoration: underline
  &:active
    color: #e55117

$nav_height: 30px

body > nav
  top: 0
  right: 0
  left: 0
  height: $nav_height
  position: absolute
  z-index: 5
  font-size: .9em
  line-height: $nav_height
  @include gradient(#bfbfbf, #9f9f9f)
  border:
    top: 1px solid #d1d1d1
    bottom: 1px solid #777
  ol, li
    margin: 0
    padding: 0
    list-style: none
    position: relative
  ol
    @include clearfix
    margin-left: 40px
    width: auto
    color: #252525
  li
    float: left
    font-weight: bold
    position: relative
    max-width: 160px
    white-space: nowrap
    overflow: hidden
    text-overflow: ellipsis
    &:after
      content: '>'
      display: inline-block
      padding: 0 .3em
      color: rgba(0,0,0,0.4)
    &:last-child:after
      display: none
  a
    &, &:link, &:visited
      color: #666
    &:hover, &:focus
      color: $color_link
  input
    @include reset_box
    margin: 5px 0
    height: $nav_height - (5px * 2)
    line-height: $nav_height - (5px * 2)
    padding: 0
      left: .5em
      right: 30px
    background: rgba(200,200,200,0.5)
    width: 60px
    box-shadow: rgba(255,255,255,.3) 0 1px 3px, inset rgba(0,0,0,0.3) 0 0 .3em, inset rgba(0,0,0,0.3) 0 1px 2px
    @include border_radius(2px)
    color: #666
    @include opacity(0.5)
    &.active, &:hover, &:focus, &:active
      @include opacity(1)
      color: #000
      background: hsl(54deg, 100%, 85%)
      outline: none
    &:focus, &:active
      background: hsl(54deg, 100%, 85%)
  button
    @include reset_box
    @include mini_button
    position: absolute
    top: 5px
    right: -30px
    width: 30px
    height: $nav_height - (5px * 2)
    text-align: center
    font:
      weight: bold
      size: 1.1em
      line-height: 1
    padding: 0 .5em
      left: .6em
    @include border_radius(2px)
.security
  float: left
  width: $nav_height
  height: $nav_height
  border-right: 1px solid rgba(0,0,0,0.1)
  span
    overflow: hidden
    text-indent: -9999px
    display: inline-block
    width: $nav_height
    height: $nav_height
    background: url("../images/lock.png") center center no-repeat
    &:hover, &:focus
      background-image: url("../images/lock_hover.png")
      cursor: pointer
  form
    @include content_overlay
    left: 5px
    top: ($nav_height + 3px)
    label
      padding-right: .5em
    input
      right: 0
      width: 140px
      &, &:hover, &:active, &:focus
        background: #fff
    button
      top: 15px
      right: 10px

  &.active
    span
      background-image: url("../images/lock_active.png")
    form
      display: block
.create_page
  overflow: visible
  button
    display: none

article
  position: absolute
  top: $nav_height + 2px
  right: 3px
  bottom: 0
  left: 240px
  overflow: auto
  padding: 30px

$editable_padding: 10px 20px

.article_header
  padding: 20px 0 1em
  margin-bottom: 1em
  position: relative
  &:after, &:before
    position: absolute
    left: 20px
    right: 20px
    content: ""
    height: 1px
    @include opacity(.3)
  &:before
    bottom: 0
    background-image: -webkit-linear-gradient(0deg,transparent,rgba(0,0,0,0.1),transparent)
  &:after
    bottom: -1px
    background-image: -webkit-linear-gradient(0deg,transparent,rgba(255,255,255,0.2),transparent)
  h1, h2
    clear: both
    padding-bottom: .2em
    padding: $editable_padding
  h1
    padding:
      top: 0
      bottom: 0
    line-height: 1
    position: relative
    font:
      size: 3em
      weight: normal
      color: #181818
  h2
    line-height: 1.4
    font-size: 1.45em
    white-space: pre-wrap
    color: #2c2c2c

.text_content
  padding: $editable_padding
  line-height: 1.6
  font-size: 1.1em
  position: relative
  white-space: pre-wrap
  min-height: 10em
  a
  &.empty
    min-height: 1em

.private
  .article_header h2, .text_content
    @include content_editable
  .text_content
    &:focus
      padding-bottom: 3em
    &.empty:before
      content: 'Write some stuff to save this page:'
      font:
        size: 11px
        weight: bold
      display: block
      position: absolute
      top: -2.3em
      left: 20px
      height: 2em
      line-height: 2em
      color: #777

article > aside
  position: fixed
  left: 0
  top: $nav_height
  font-size: 10px
  bottom: 0
  overflow: auto
  width: 240px
  background: #181818 url("../images/carbon_fibre_texture3.gif") 0 0 repeat
  box-shadow: inset rgba(0,0,0,.7) -1px 3px 5px, rgba(0,0,0,0.5) 0 0 20px
  ol, ul, li
    list-style: none
    margin: 0
    padding: 0
  section
    padding: 20px
    position: relative
    &:before, &:after
      position: absolute
      left: 20px
      right: 20px
      content: ""
      height: 1px
      @include opacity(0.3)
    &:before
      bottom: 0
      background-image: -webkit-linear-gradient(0deg,transparent,rgba(0,0,0,1),transparent)
    &:after
      bottom: -1px
      background-image: -webkit-linear-gradient(0deg,transparent,rgba(255,255,255,0.1),transparent)
  h1
    padding: 0
      bottom: 1em
    font:
      size: .8em
      family: $font_stack
    color: rgba(255,255,255,0.6)
    text:
      transform: uppercase
      shadow: rgba(0,0,0,.8) 0 -1px 1px
  a
    &, &:link, &:visited
      color: $color_link_bright
    &:hover, &:active
.folders, .files
  a
    display: block
    padding: 4px 0
      left: 26px
    margin-bottom: 3px
    position: relative
    min-height: 18px
    line-height: 18px
    @include border_radius(3px)
    overflow: hidden
    text-overflow: ellipsis
    &:hover, &:focus
      @include gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.5))
      text-decoration: none
    &:before
      position: absolute
      left: 4px
      top: 4px
      content: ''
      height: 16px
      width: 16px
      background:
        position: 0 0
        repeat: no-repeat
        size: 100% 100%
.folders a:before
  background-image: url("../images/folder.png")
.files
  .info
    position: absolute
    right: 20px
    top: 16px
    p
      @include content_overlay
    span
      display: block
      width: 18px
      height: 18px
      @include border_radius(9px)
      text-indent: -9999px
      cursor: pointer
      border: 1px solid #000
      background: url("../images/info.png") -1px 0 no-repeat
      @include opacity(0.7)
      &:hover, &:focus
        @include opacity(1)
        background:
          color: rgba(0,0,0,0.5)
          image: url("../images/info_hover.png")
        border-color: $color_link_bright
    &.active
      span
        @include opacity(1)
        background:
          color: rgba(0,0,0,0.5)
          image: url("../images/info_active.png")
        border-color: #fff6a3
      p
        color: #353535
        display: block
        top: 24px
        left: auto
        right: -7px
        width: 190px
        &:before
          left: auto
          right: 8px
  a:before
    background-image: url("../images/file.png")
.images
  .controls
    display: none
  ul, li
    margin: 0
    padding: 0
  ul
    @include clearfix
    margin:
      left: -2%
      right: -2%
  li
    float: left
    width: 29%
    margin: 5px 2%
    height: 40px
    a
      display: block
      height: 100%
      width: 100%
      overflow: hidden
      @include gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.1))
      border: 2px solid transparent
      &:hover, &:focus
        border-color: $color_link_bright
    //&:first-child,
    &.active
      width: 100%
      margin: 20px 0
      height: auto
      max-height: 100px
      overflow: hidden
      a
        border: none
    img
      display: block
      width: 100%

.image_viewer
  position: absolute
  z-index: 3
  top: 0
  right: 0
  bottom: 0
  left: 0
  background: #000
  padding: 30px
    top: 60px
  text-align: center
  overflow: auto
  ul, li
    margin: 0
    padding: 0
  ul
    position: fixed
    left: 13px + 240px
    top: 13px + $nav_height
  li
    display: inline-block
    margin: 0
      right: 14px
    font-size: 18px
    height: 24px
    line-height: 24px
    color: #fff
  .title
    margin-top: 2px
    max-width: 300px
    white-space: nowrap
    overflow: hidden
    text-overflow: ellipsis
  .action
    border: 2px solid #fff
    @include border_radius(12px)
    font-size: 12px
    @include opacity(.4)
    &, a
      padding: 0 10px
      text-decoration: none
      cursor: pointer
      background: #000
      &, &:link, &:visited
        color: #fff
      &:hover, &:focus
        border-color: $color_link_bright
        color: $color_link_bright
        @include opacity(1)
    a
      background: none
      display: block
      margin: -2px -10px
      padding:
        top: 2px
        bottom: 2px
  img
    margin: 0 auto

//@media screen and (min-width:480px)
//
//@media screen and (max-width:768px)
//
//@media screen and (min-width: 992px)
//
//@media screen and (min-width:1382px)